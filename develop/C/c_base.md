## C 语言基础

C语言一经出现就以其功能丰富、表达能力强、灵活方便、应用面广等特点迅速在全世界普及和推广。C语言不但执行效率高而且可移植性好，可以用来开发应用软件、驱动、操作系统等。C语言也是其它众多高级语言的鼻祖语言，所以说学习C语言是进入编程世界的必修课


**main.c**
```
#include<stdio.h>

int main()
{
    printf("Hello World");
    return 0;
}
```
使用 `gcc main.c` 编译该程序，默认生成 `a.exe` 文件, 使用 `.\a.exe` 运行即可。


### C程序结构

**简单来说，一个C程序就是由若干头文件和函数组成**

![](./img/c程序结构.PNG "")

`#include <stdio.h>`就是一条预处理命令，它的作用是通知C语言编译系统在对C程序进行正式编译之前需做一些预处理工作

函数就是实现代码逻辑的一个小的单元

**在最新的C标准中，main函数前的类型为int而不是void**

### 必不可少之主函数

一个C程序有且只有一个主函数，即`main`函数

![](./img/cmain.PNG "")

**C程序就是执行主函数里的代码，也可以说这个主函数就是C语言中的唯一入口**

`printf()`是格式输出函数，这里就记住它的功能就是在屏幕上输出指定的信息

`return`是函数的返回值，根据函数类型的不同，返回的值也是不同的

`\n`是转义字符

**C程序一定是从主函数开始执行的**

### 良好习惯之规范

1. 一个说明或一个语句占一行，例如：包含头文件、一个可执行语句结束都需要换行
2. 函数体内的语句要有明显缩进，通常以按一下Tab键为一个缩进
3. 括号要成对写，如果需要删除的话也要成对删除
4. 当一句可执行语句结束的时候末尾**需要有分号**, 跟 go 语言不同
5. 代码中所有符号均为**英文半角符号**


![](./img/代码规范.PNG "")


### 程序解释(注释)

注释是为了使别人能看懂你写的程序，也为了使你在若干年后还能看得懂你曾经写的程序而设定的。**注释是写给程序员看的，不是写给电脑看的**。所以注释的内容，C语言编译器在编译时会被自动忽略

C语言注释方法有两种:
1. 多行注释:  /* 注释内容 */
2. 单行注释:  //注释一行

```
/*
    作者: Lss
    作用: 注释演示
*/
#include<stdio.h>
int main()
{
    printf("C Good\n");    //C 语言很好
    printf("Go Good\n");   //Go 语言很好
    return 0;
}
```

### 有名有姓的C

编程时**给变量或者函数起的名字就是标识符**

C语言的标识符是不可以随便起名字的，必须遵守一定的规则:
- 标识符可以是字母`(A～Z，a～z)`、数字`(0～9)`、下划线`_`组成的字符串，并且第一个字符必须是字母或下划线
- 标识符是严格区分大小写的。例如Lss和lss 是两个不同的标识符
- 标识符最好选择有意义的英文单词组成做到"见名知意"，不要使用中文
- 标识符不能是C语言的关键字

![](./img/标识符.PNG "")

### 变量及赋值

变量就是可以变化的量，而每个变量都会有一个名字（标识符）。变量占据内存中一定的存储单元。使用变量之前必须先定义变量，要区分**变量名和变量值是两个不同的概念**

![](./img/变量.PNG "")

变量定义的一般形式为: `数据类型 变量名;`

多个类型相同的变量: `数据类型 变量名1, 变量名2, 变量名3 ...;`

```
#include<stdio.h>

int main()
{
    int num;
    num = 100;
    int a, b, c;
    a = 1;
    b = 2;
    c = 3;
    printf("%d\n", num);
}
```

变量名和标识符的命名规范完全相同

变量的赋值分为两种方式:
1. 先声明在赋值
2. 声明的同时赋值

```
//先声明在赋值
int num;
num = 100;

//声明的同时赋值
int x = 10;
```

**在定义中不允许连续赋值，如int a=b=c=5;是不合法的**

### 基本数据类型

C语言中，数据类型可分为：**基本数据类型，构造数据类型，指针类型，空类型**四大类

![](./img/数据类型.PNG "")

#### 1. 整型 浮点型 字符型

数据类型|说明|字节|应用|示例
---|:---:|:---:|:---:|---:
char|字符型|1|用于存储单个字符|char sex = 'M';
int|整型|2|用于存储整数|int height = 18;
folat|单精度浮点型|4|用于存储小数|float price = 11.1;
double|双精度浮点型|8|用于存储位数更多的小数|double pi = 3.1415926;


整型数据是指不带小数的数字。生活中有很多信息适合使用整型数据来表示，比如：人的年龄、班级的人数、书的总页数等等。因此整型的类型比较多:

数据类型|说明|字节|取值范围
---|:---:|:---:|---:
int|整型|2|
short int|短整型|2|
unsigned int|无符号整型|2|
long int|长整型|4|
unsigned short int|无符号短整型|2|
unsigned long int|无符号长整型|4|

浮点数据是指带小数的数字。生活中有很多信息适合使用浮点型数据来表示，比如：人的体重(单位：公斤)、商品价格、圆周率等等。因为精度的不同又分为3种:

数据类型|说明|字节|取值范围
---|:---:|:---:|---:
float|单精度型|4|
double|双精度型|8|
long double|长双精度型|16|

**C语言中不存在字符串变量，字符串只能存在字符数组中**

### 格式化输出语句
格式化输出语句，也可以说是占位输出，是将各种类型的数据按照格式化后的类型及指定的位置从计算机上显示。这样做的好处，是有利于计算机能够准确的将我们所要类型数据给我们

其格式为: `printf("输出格式符"，输出项);`

C语言中的常用格式化符:

格式符|说明|举例
:---:|:---:|:---:
%d|带符号十进制整数|
%c|单个字符|
%s|字符串|
%f|6位小数|

**格式符的个数要与变量、常量或者表达式的个数一一对应**

### 不可改变的常量

在程序执行过程中，值不发生改变的量称为常量。C语言的常量可以分为**直接常量和符号常量**

直接常量也称为**字面量**，是可以直接拿来使用，无需说明的量，比如:
- 整型常量：13、0、-13
- 浮点型常量：13.33、-24.4
- 字符常量：'a'、'M'
- 字符串常量："I Love You"

下面的代码分别打印这四种直接常量:
```
printf("%d\n", 100)   //整型常量
printf("%f\n", 3.14)  //浮点型常量
printf("%c\n", 'A')   //字符常量
printf("I Love You!") //字符串常量
```

在C语言中，可以用一个标识符来表示一个常量，称之为符号常量。符号常量在使用之前必须先定义，其一般形式为: `#define 标识符 常量值`

**符号常量的标示符一般习惯使用大写字母，变量的标示符一般习惯使用小写字母**，加以区分。下面是一个使用符号常量的小例子:

```
#include<stdio.h>
#define PI 3.14    //定义一个圆周率常量

int main()
{
    printf("圆周率: %f\n", PI);
    return 0;
}
```

**常量是不可改变的**


### 自动类型转换
数据类型存在自动转换的情况:
```
char c = 'a';
int x;
double d;
x = c;     //字符类型可以自动转换为整型
d = x;     //整型可以自动转换为浮点类型
```

自动转换发生在不同数据类型运算时，在编译的时候自动完成。自动转换遵循的规则就好比小盒子可以放进大盒子里面一样，下图表示了类型自动转换的规则:

![](./img/类型转换.PNG "")

**char类型数据转换为int类型数据遵循ASCII码中的对应值**

**字节小的可以向字节大的自动转换，但字节大的不能向字节小的自动转换**


### 强制类型转换

强制类型转换是通过定义类型转换运算来实现的。其一般形式为: `(数据类型)(表达式)`

其作用是把表达式的运算结果强制转换成类型说明符所表示的类型:
```
double tempOne = 6.666;
int tempTwo = int(tempOne);  //强制转换为int类型
printf("%f\n", tempOne)
printf("%d\n", tempTwo)
```

**数据类型和表达式都必须加括号，如把`(int)(x/2+y)`写成`(int)x/2+y`则成了把x转换成`int`型之后再除2再与y相加了**

**转换后不会改变原数据的类型及变量值，只在本次运算中临时性转换**

**强制转换后的运算结果不遵循四舍五入原则**

### 运算符

C语言中的运算就是对数据进行操作、处理的过程。那么运算符又干什么的呢？运算符就是指定该运算的处理方式

- 算术运算符
- 赋值运算符
- 关系运算符
- 逻辑运算符
- 三目运算符


### 算术运算符

名称|运算符号
:--:|:--:
加法|+
减法|-
乘法|*
除法|/
求余运算(模运算符)|%
自增运算符|++
自减运算符|--


如果相除的两个数都是整数的话，则结果也为整数，小数部分省略，如`8/3 = 2`；而两数中有一个为小数，结果则为小数，如：`9.0/2 = 4.500000`

取余运算只适合用两个整数进行取余运算，如：`10%3 = 1`；而`10.0%3`则是错误的；运算后的符号取决于**被模数**的符号，如`(-10)%3 = -1`;而`10%(-3) = 1`

### 自增与自减运算符

自增运算符为`++`，其功能是使变量的值自增1；自减运算符为`--`，其功能是使变量值自减1。它们经常使用在循环中。自增自减运算符有以下几种形式:

运算表达式|说明|运算规则
:--:|:--:|:--:
++a|a自增1后，在取值|先运算，在取值
--a|a自减1后，在取值|先运算，在取值
a++|a取值之后，a的值在自增1|先取值，在运算
a--|a取值之后，a的值在自减1|先取值，在运算

```
#include<stdio.h>

int main()
{
    int a = 100;
    printf("%d\n",a++);  //100
    printf("%d\n",++a);  //102
    printf("%d\n",a--);  //102
    printf("%d\n",--a);  //100
    printf("%d\n",a+1);  //101
    printf("%d\n",a);    //100
    return 0;
}
```

### 赋值运算符

语言中赋值运算符分为**简单赋值运算符**和**复合赋值运算符**，之前我们已经接触过简单赋值运算符`=`号了

复合赋值运算符就是在简单赋值符`=`之前加上其它运算符构成，例如`+=、-=、*=、/=、%=`

```
int a = 3;
a += 5;
```

义整型变量a并赋值为3，**a += 5;这个算式就等价于a = a+5;** 将变量a和5相加之后再赋值给a

**复合运算符中运算符和等号之间是不存在空格的**

### 关系运算符

符号|意义|举例|结果
:--:|:--:|:--:|:--:
>|大于|10>5|1
>=|大于等于|10>=10|1
<|小于|10<5|0
<=|小于等于|10<=10|1
==|等于|10==5|0
!=|不等于|10!=5|1

```
#include<stdio.h>

int main()
{
    int a = 10;
    int b = 4;
    printf("%d\n", a>b);   //1
    printf("%d\n", a==b);  //0
}
```

**关系表达式的值是`真`和`假`，在C程序用整数`1`和`0`表示**


### 逻辑运算符

符号|意义|举例|结果
:--:|:--:|:--:|:--:
`&&`|逻辑与|0`&&`1|0
`||`|逻辑或|0`||`1|1
`!`|逻辑非|`!`0|1

逻辑运算的值也是有两种分别为`真`和`假`，C语言中用整型的1和0来表示:
1. **与运算(&&):**
   参与运算的两个变量都为真时，结果才为真，否则为假。例如：`5>=5 && 7>5` ，运算结果为真
2. **或运算(||):**
   参与运算的两个变量只要有一个为真，结果就为真。 两个量都为假时，结果为假。例如：`5>=5||5>8`，运算结果为真
3. **非运算(!):**
   参与运算的变量为真时，结果为假；参与运算量为假时，结果为真。例如：`!(5>8)`，运算结果为真


### 三目运算符

C语言中的三目运算符：`?:`，其格式为: `表达式1 ? 表达式2 : 表达式3;`

执行过程: **先判断表达式1的值是否为真，如果是真的话执行表达式2；如果是假的话执行表达式3**

```
#include<stdio.h>

int main()
{
    int money = 100;
    int price = 120;
    printf("我们买不买呢:");
    printf("%c\n", price <= money ? 'y' : 'n');
    return 0;
}
```

### 运算符优先级

C语言中运算符中最高等级的为`()`

### 分支结构之简单if语句

```
if(results == 100)
{
    printf("%s\n", "good");
}
```

**if()后面没有分号，直接写{}**

### 分支结构之简单if-else语句

```
if(results == 100)
{
    printf("%s\n", "good ok");
}
else
{
    printf("%s\n", "no good");
}
```

**if()后面没有分号，直接写{}，else后面也没有分号，直接写{}**

### 分支结构之多重if-else语句

```
if(results == 100)
{
    printf("%s\n", "one");
}
else if(results >= 70)
{
    printf("%s\n", "two");
}
else
{
    printf("%s\n", "three");
}
```

**当某一条件为真的时候，则不会向下执行该分支结构的其他语句**

### 分支结构之嵌套if-else语句

```
int results = 98;
int ranking = 2;
if(results > 90)
{
    if(ranking <= 3)
    {
        printf("%s\n", "good");
    }
    printf("%s\n", "two good");
}
else
{
    printf("%s\n", "no good");
}
```


### 循环结构之while循环

```
int i = 0;
while(i<10)
{
    i++;
    printf("%d\n", i);
}
```

- while语句中的表达式一般是关系表达或逻辑表达式，当表达式的值为假时不执行循环体，反之则循环体一直执行
- 一定要记着在循环体中改变循环变量的值，否则会出现死循环
- 循环体如果包括有一个以上的语句，则必须用{}括起来，组成复合语句


### 循环结构之do-while循环

`do-while`循环语句的语义是：它先执行循环中的执行代码块，然后再判断`while`中表达式是否为真，如果为真则继续循环；如果为假，则终止循环。因此，**do-while循环至少要执行一次循环语句**

```
int i = 0;
do
{
    i++;
    printf("%d\n", i);
}while(i<10);
```

**使用do-while结构语句时，while括号后必须有分号**


### 循环结构之for循环

```
int i;
for(i=1; i<=10; i++)
{
    printf("%d", i);
}
```

**for循环中的分号一定要写**

for循环中的**表达式1、2、3**均可可以缺省，但分号(;)不能缺省

省略**表达式1（循环变量赋初值）**，表示不对循环变量赋初始值:
```
int i = 1;
for( ; i<=10; i++)
{
    printf("%s\n", i);
}
```

省略**表达式2(循环条件)**，不做其它处理，循环一直执行（死循环）:
```
int i;
for(i=0; ; i++)
{
    printf("%d\n", i);
}
```

省略**表达式3(循环变量增量)**，不做其他处理，循环一直执行（死循环）:
```
int i;
for(i=0; i<=10; )
{
    printf("%d", i);
}
```

**死循环可以使用break解决**


表达式1和表达式3可以是一个简单表达式也可以是多个表达式以逗号分割:
```
int sum, num;
for(sum=0, num=0; num <= 3; num++, sum++)
{
    sum += num;
    printf("%d, %d\n", num, sum);
}
```

表达式2一般是关系表达式或逻辑表达式，但也可是数值表达式或字符表达式，只要其值非零，就执行循环体:
```
int sum, num;
for(sum=0, num=0; num<=3 && sum <=5; num++, sum++)
{
    sum += num;
    printf("%d, %d\n", num, sum);
}
```

**各表达式中的变量一定要在for循环之前定义**

```
//这样是错误的, sum, num 变量一定要在for之前定义
for(int sum=0, int num=0; num<=3 && sum <= 5; num++, sum++)
```

### 循环结构之三种循环比较

`while、do-while和for`三种循环在具体的使用场合上是有区别的:

- 在知道循环次数的情况下更适合使用for循环
- 在不知道循环次数的情况下适合使用while或者do-while循环，如果有可能一次都不循环应考虑使用while循环，如果至少循环一次应考虑使用do-while循环

### 循环结构之多重循环

```
#include<stdio.h>

int main()
{
    int i, j;
    for(i=1;i<=5;i++)
    {
        for(j=1;j<=5;j++)
        {
            printf("*");
        }
        printf("\n");
    }
    return 0;
}
```

### 结束语句之break语句

```
#include<stdio.h>

int main()
{
    int i;
    for(i=1; i<=10; i++)
    {
        printf("%d", i);
        if(i == 5)
        {
            printf("stop...\n");
            break;
        }
    }
    printf("today over...");
    return 0;
}
```

**在没有循环结构的情况下，break不能用在单独的if-else语句中**

**在多层循环中，一个break语句只跳出当前循环**

### 结束语句之continue语句

```
#include<stdio.h>

int main()
{
    int i;
    for(i=1; i<=10; i++)
    {
        printf("%d", i);
        if(i == 5)
        {
            printf("stop...\n");
            continue;
        }
    }
    printf("today over...");
    return 0;
}
```

**continue语句的作用是结束本次循环开始执行下一次循环**

**break语句与continue语句的区别是：break是跳出当前整个循环，continue结束本次循环开始下一次循环**


### 分支结构之switch语句

```
#include<stdio.h>

int main()
{
    int day = 1;
    switch (day)
    {
    case 1:
        printf("%s\n", "one");
        break;
    case 2:
        printf("%s\n", "two");
        break;
    default:
        printf("%s\n", "default");
        break;
    }
}
```

- 在case后的各常量表达式的值不能相同，否则会出现错误
- 在case子句后如果没有break;会一直往后执行一直到遇到break;才会跳出switch语句
- switch后面的表达式语句只能是整型或者字符类型
- 在case后，允许有多个语句，可以不用{}括起来
- 各case和default子句的先后顺序可以变动，而不会影响程序执行结果
- default子句可以省略不用


### goto语句

goto语句是一种无条件分支语句

```
#include<stdio.h>

int main()
{
    int sum = 0;
    int i = 1;
    LOOP:if(i<=10)   //LOOP就是一个有效标识符
    {
        sum += i;
        i++;
        goto LOOP;   //转到LOOP所在的位置继续执行
    }
    printf("%d\n", sum);
    return 0;
}
```

其中LOOP是一个标识符，该标识符一般用英文大写并遵守标识符命名规则，这个标识符加上一个`:`一起出现在函数内某处，执行goto语句后，程序将跳转到该标号处并执行其后的语句


### 自创函数

